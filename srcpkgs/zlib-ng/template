# Template file for 'zlib-ng'
pkgname=zlib-ng
version=2.0.5
revision=1
build_style=cmake
configure_args="-DZLIB_COMPAT=ON"
short_desc="Zlib replacement with optimizations for 'next generation' systems"
maintainer="Artur Sinila <opensource@logarithmus.dev>"
license="Zlib"
homepage="https://github.com/zlib-ng/zlib-ng"
distfiles="https://github.com/zlib-ng/zlib-ng/archive/${version}.tar.gz"
checksum=eca3fe72aea7036c31d00ca120493923c4d5b99fe02e6d3322f7c88dbdcd0085

post_install() {
	mkdir "${DESTDIR}/usr/lib/zlib-ng" "${DESTDIR}/usr/include/zlib-ng"
	mv "${DESTDIR}/usr/lib/pkgconfig/zlib.pc" "${DESTDIR}/usr/lib/pkgconfig/zlib-ng.pc"
	mv ${DESTDIR}/usr/lib/libz.* ${DESTDIR}/usr/lib/zlib-ng/
	mv ${DESTDIR}/usr/include/*.h ${DESTDIR}/usr/include/zlib-ng/
}

zlib-ng-devel_package() {
	depends="${sourcepkg}>=${version}_${revision}"
	short_desc+=" - development files"
	pkg_install() {
		vmove usr/include
		vmove usr/lib/pkgconfig
		vmove "usr/lib/zlib-ng/*.a"
		vmove "usr/lib/zlib-ng/*.so"
	}
}
