# Template file for 'simulide'
pkgname=simulide-enhanced
version=0.4.14
revision=1
_pkgname=SimulIDE
_rev=SR5
build_wrksrc=build_XX
build_style=qmake
hostmakedepends="qt5-qmake pkg-config"
makedepends="qt5-devel qt5-svg-devel qt5-multimedia-devel qt5-serialport-devel
	qt5-script-devel elfutils-devel"
short_desc="Electronic circuit simulator for PIC, AVR, Arduino"
maintainer="Artur Sinila <opensource@logarithmus.dev>"
license="GPL-3.0-or-later"
homepage="https://simulide.com"
distfiles="https://github.com/Logarithmus/simulide-enhanced/archive/${version}.tar.gz"
checksum=914b383a958fa92b581c792641690d07c592e2ed1bfdc8c4c3445a035ba54240
replaces="simulide>=0"

if [ "$CROSS_BUILD" ]; then
	hostmakedepends+=" qt5-host-tools qt5-svg-devel qt5-script-devel \
	qt5-serialport-devel qt5-multimedia-devel"
fi

pre_build() {
	CXXFLAGS="$($PKG_CONFIG --cflags glib-2.0)"
}

do_install() {
	cd release/${_pkgname}_${version}-${_rev}
	vbin bin/simulide
	mv share ${DESTDIR}/usr/
}
