# Template file for 'simulide'
pkgname=simulide
version=0.4.14
revision=1
_pkgname=SimulIDE
_rev=SR4
wrksrc=${pkgname}_${version}-${_rev}_Sources
build_wrksrc=build_XX
build_style=qmake
hostmakedepends="qt5-qmake pkg-config"
makedepends="qt5-devel qt5-svg-devel qt5-multimedia-devel qt5-serialport-devel
	qt5-script-devel elfutils-devel"
short_desc="Electronic circuit simulator for PIC, AVR, Arduino"
maintainer="Artur Sinila <opensource@logarithmus.dev>"
license="GPL-3.0-or-later"
homepage="https://simulide.com"
distfiles="https://mailfence.com/pub/docs/santigoro/web/${_pkgname}_${version}/${_pkgname}_${version}-${_rev}_Sources.tar.gz"
checksum=39879bf6566b1d4902f6ef8c7e8ceb1f998deeed02c41e1b67b443086acf9ebd

if [ "$CROSS_BUILD" ]; then
	hostmakedepends+=" qt5-host-tools qt5-svg-devel qt5-script-devel \
	qt5-serialport-devel qt5-multimedia-devel"
fi

pre_build() {
	CXXFLAGS="$($PKG_CONFIG --cflags glib-2.0)"
}

do_install() {
	cd executables/${_pkgname}_${version}-${_rev}
	vbin bin/simulide
	mv share ${DESTDIR}/usr/
}
